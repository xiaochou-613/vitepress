# 理论题

- [x] 交换技术主要有哪些种？它们主要特点是什么？

	> 电路交换：需建立一条独占的信道，信道利用率低
	>
	> 报文交换：报文采用存储--转发方式传送，报文大时，在交换节点中需较大存储空间，不能满足实时通信
	>
	> 分组交换：报文分成若干份进行存储转发，不占独立信道，信道利用率高，适合实时通信

	

- [x] 直接用数据“everythingoverip”的ASCII编码构造一个MAC帧，请描述此MAC帧的数据区

- [x] 简述协议与服务的区别与联系。

	> 协议是‘’水平的‘’，服务是‘’垂直的‘’
	>
	> 协议的实现保证了能够向上一层提供服务
	>
	> 服务是由下层向上层通过层间接口提供

- [x] 试简单说明下列协议的作用：IP、ARP、ICMP和IGMP。

	> IP：实现网络互连，使参与互连的不同的网络从用户看来是一个统一的网络。网际协议IP是TCP/IP体系中最主要的协议之一。
	>
	> ARP：解决主机或路由器IP地址和硬件地址的映射问题
	>
	> ICMP：提供差错报告和询问报文，提高IP数据交付成功的机会。
	>
	> IGMP：用于探寻、转发本局域网内的组成员关系

- [x] 试说明IP地址与物理地址的区别。为什么要使用这两种不同的地址。

  > 物理地址：48bit构成，是接入网络设备的唯一标识，数据传输中封装在帧头。
  >
  > IP地址：32bit组成，是逻辑地址，在IP协议的通信中，被封装在数据报首部。
  >
  > 为什么：根据IP地址的结构，可以很方便的在互联网中寻址和路由。并转换成相应的硬件地址，在通信中两种地址工作在协议的不同层次，所以需要两种。

- [x] 简述以太网介质访问控制(CSMA/CD) 的工作原理

	> 先听后发：发送前先监听信道是否空闲，若空闲则发送，否则不发送。 
	>
	> 边听边发：在发送过程中，仍需继续监听。
	>
	> 冲突停止：若监听到冲突，则立即停止发送数据，然后发送一串干扰信号。
	>
	> 延迟重发：延迟一段随机时间（通过退避算法计算），重新发送该数据。

- [x] 用集线器扩大以太网规模，会不会使以太网的性能下降？为什么？

	> 集线器扩大以太网规模时，扩大了冲突域。此时站点数量增加，发生冲突的可能性也增加。并且用户共享宽带，导致网络性能下降。

- [x] 简述TCP与UDP之间的相同点和不同点。

	> TCP和UDP都是基于IP协议的传送协议。
	>
	> TCP：面向连接的，可靠。
	>
	> UDP：无连接的，不可靠。
	>
	
- [x] TCP与UDP的主要区别

	> TCP：面向连接的协议，允许从一台机器发出的字节流无差错地发往互联网上的其他机器。TCP还要处理流量控制，避免快速发送方向低速接收发送过多的报文而使接收方无法处理。
	>
	> UDP：一个不可靠的无连接协议，用于不需要TCP的排序和流量控制而自己完成这些功能的应用程序

- [x] 无连接服务和面向连接服务的主要区别是什么？它们各有什么特点？

	> 面向连接的服务是在数据交换之前必须建立连接，交换结束后释放连接。能够保证接收和发送的顺序一致，==保证可靠的服务质量。==
	>
	> 无连接服务中，两个实体之间的通信不需要建立链接，因此其下层的有关资源不需要实现预定保留，这些资源在数据传输时动态地进行分配。不保证接收和发送的顺序一样，也不保证可靠的服务质量，且不进行数据交换时，两个通信实体不需要同时活跃。

- [x] 简述TCP所提供服务的主要特点。（6条）

	> 面向连接的传输，传输前需要建立链接，传输结束释放连接。
	>
	> 端到端通信，不支持广播。
	>
	> 高可靠性，确保传输数据的正确性，不出现丢失和乱序
	>
	> 全双工传输
	>
	> 采用字节流方式。如果字节太长，将其分段。
	>
	> 提供紧急数据传达功能。当有紧急数据要发送时，会立即发送，接收方会暂停当前工作，读取紧急数据并做相应处理。

- [ ] TCP提供什么样的服务？

	> 提供端到端、可靠的、进程间的面向连接的数据传送服务。

- [x] UDP提供什么样的服务？

	> 提供不可靠的、无连接的服务。不同于IP协议，IP协议是网络层协议向传输层提供无连接服务。UDP是传输层协议，向应用层提供无连接的服务。

- [x] TCP提供了流量控制功能，为什么还要提供拥塞控制功能？试比较它们异同点。

  > 流量控制是为了保证发送端不会以高于接收者承受的速率传输，只与某个发送者和某个接收者之间的点到点通信有关。
  >
  > ==拥塞控制确保通信子网能够有效为主机传递分组，这是一个全局性的问题。涉及到所有主机、所有路由器、路由器中的存储-转发处理以及所有导致削弱通信子网能力的其他因素。==
  
- [x] 使用TCP对实时话音数据的传输有没有什么问题？使用UDP在传送数据文件时会有什么问题？

	> 如果语音数据不是实时播放就可以用TCP。因为TCP传输可靠。但是假定是实时传输，则必须使用UDP
	>
	> UDP不保证可靠交付，但UDP比TCP开销小很多。因此只要应用程序接受这样的服务质量就可以使用UDP

- [ ] 运输层的主要任务是什么？运输层服务主要包括哪些内容？

	> 主要任务是提供点到点的可靠传输服务。
	>
	> 包括：标识和维护运输连接（建立和释放连接），选择服务质量，提供流量控制和拥塞控制等。

- [x] 简述域内路由协议RIP和OSPF在路由器之间交换路由信息时的主要区别。

	> RIP：
	>
	> 仅和相邻的路由交换信息
	>
	> 交换的信息是本路由所有的全部信息，即路由表
	>
	> 按固定的时间间隔交换路由信息
	>
	> OSPF：
	>
	> 向本自治系统中所有路由器发送信息
	>
	> 发送的信息就是与本路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。
	>
	> 只有当链路状态发生变化时，路由器才发送信息

- [x] 简述距离矢量协议(RIP)和链路状态协议(OSPF)有什么区别？

	> （1）RIP向邻居发送路由信息   
	>
	> （2）RIP定时更新路由信息    
	>
	> （3）RIP将本机全部路由信息作为更新信息 
	>
	> （4）OSPF向全网扩散链路状态信息  
	>
	> （5）OSPF当网络结构发生变化立即发送更新信息 
	>
	> （6）OSPF只发送需要更新的信息。

- [x] 主机使用ARP能直接查询到其他网段的MAC地址吗？为什么？

	> 不能。因为ARP广播询问包会被路由器阻拦。

- [x] 简述IP数据报首部中的寿命字段（TTL）的作用。

	> TTL指明了该数据报还能经过多少个路由器的转发，每经过一次路由器-1.等于0时该数据报会被丢弃。因此TTL字段可以确保数据包不会永远在网络中循环。

- [x] IP数据报中的首部检验和并不检验数据报中的数据。这样做的最大好处是什么？坏处是什么？

	> 在首部中的错误比在数据中的错误更严重。一个坏的地址可能导致分组被投寄到错误的主机。而主机并不会检查是否是投递给他们的。
	>
	> 数据不参与检验和计算，因为这样做代价太大了，上层协议通常做这种检验工作，从而引起重复与多余。
	>
	> 因此这样做可以加快分组的转发，但是数据出现差错无法及时发现

- [x] 已知IP地址是141.14.72.24，子网掩码是255.255.192.0，试求网络地址？

- [x] 假定 1km 长的 CSMA/CD 网络的数据率为 1Gb/s。设信号在网络上的传播速率为200000km/s。求能够使用此协议的最短帧长。

	> 单程传播时间为:1/200000 s,5μs，来回就是10μs。为了能够按照CSMA/CD工作。最小帧的发射时间不能小于10μs，以1Gb/s 速率工作，10μs 可以发送的比特数等于10000，因此最小帧长10000bit或1250字节

- [x] 简要回答交换机和路由器在网络互连中功能的异同?

	> 交换机是工作在数据链路层实现网络互连的设备，交换机有选择地将带有地址信号的帧从一个网段传输到另一个网段。用来连接类型相似或不同的局域网。
	>
	> 路由器是工作在网络层的网络互连设备，主要用来实现路径选择和协议的转换

- [x] 有人认为：“ARP协议向网络层提供了转换地址的服务，因此ARP应当属于数据链路层。”这种说法为什么是错误的？

	> ARP本身是网络层的一部分。ARP为IP协议提供了转换地址的服务，数据链路层使用硬件地址，而不使用IP地址。无需转换本身即可正常运行。因此ARP不在数据链路层。

- [x] 主机A发送IP数据报给主机B，途中经过了5个路由器。试问在IP数据报的发送过程中总共使用了几次ARP？ 

- [x] 端口的作用是什么？为什么端口要划分为三种？

	> 端口的作用是对TCP/IP体系的应用进程进行统一的标志，使运行不同操作系统的计算机的应用进程能够互相通信。
	>
	> 熟知端口：0~1023.标记常规的服务进程
	>
	> 登记端口：1024-49151，标记非常规的服务进程

- [x] 举例说明域名转换的过程。域名服务器中的高速缓存的作用是什么？

	> 域名转换的过程：把不方便记忆的IP地址转换成方便记忆的域名地址
	>
	> 作用：可大大减轻根域名服务器的负荷，使因特网上的DNS查询请求和回答报文的数量大大减少

- [x] 信道复用的目的是什么，常用的信道复用技术有哪些?

	> 目的：让不同的计算机连到相同的信道上，共享信道资源，充分利用信道宽带
	>
	> 频分复用、时分复用、波分复用、码分复用

# 综合题

若构造一个CSMA/CD总线网，速率为100Mb/s,信号在电缆中的传播速率为2×10⁵km/s,数据帧的最小长度为125字节。试求总线电缆的最大长度(假设总线电缆中无中继器)。

```
125*8/(100*106)=2*L/（2*108），L=1000m
帧的传输时延至少要两倍于信号在总线中的传播时延
```

噪声存在于所有的电子设备和通信信道中。噪声是随机产生的，它的瞬时值有时会很大。因此噪声会使接收端对码元的判决产生错误。数据可能出错在链路D。

==若干个终端用纯ALOHA随机接入协议与远程主机通信，通信速率为2400bps。设每个终端平均每2分钟发送一个帧，帧长为200比特，问终端数目最多允许为多少？若采用时隙ALOHA协议，其结果有如何？若改变以下数据，分别重新计算上述问题：==

（a）帧长变为500比特； 

（b）终端每3分钟发送一个帧； 

（c）线路速率改为4800bps。 

```SAS
纯ALOHA的容量为0.18×2400＝432bps，终端速率＝200比特/120秒＝5/3bps， 
最大终端数=432÷5/3＝259个。 
时隙ALOHA容量为0.37×2400＝888bps，所以最大终端数888÷5/3＝532个，约为纯ALOHA的终端数加倍。 
（a）帧长增加了2.5倍，以上答案除以2.5； 
（b）终端速率降为原来的2/3，以上答案乘以1.5； 
（c）线路速率加倍，以上答案相应加倍。
```

一个数据报长度为 4000 字节（固定首部长度）。现在经过一个网络传送，但此网络能够传送的最大数据长度为1500字节。试问应当划分为几个短些的数据报片？各数据报片的数据字段长度、片偏移字段和ＭＦ标志应为何数值？

```
数据报的总长度减去首部长度，得出IP数据报的数据部分长度为：4000-20=3980 B
划分出一个数据报片：3980-1480=2500 B
剩下的数据长度，大于MTU。
再划分出一个数据报片：2500-1480=1020 B
剩下的数据长度，小于MTU。
故划分为3个数据报片，其数据字段长度分别为：1480、1480和1020字节。
片偏移字段的值分别为0/8=0、1480/8=185和2*1480/8=370。
MF字段的值分别为1、1和0。
```

长度为1km，数据传输率为10Mbps的以太网，电信号在网上的传播速度是200m/µs。假设以太网数据帧的长度为256比特，其中包括64比特帧头、校验和及其它开销。数据帧发送成功后的第一个时间片保留给接收方用于发送一个64比特的的确认帧。假设网络负载非常轻（即不考虑冲突的任何情形），问该以太网的有效数据传输率是多少？

```
（1）发送256比特数据帧所用的发送时间=256bits/10Mbps=25.6µs；
（2）数据帧在电缆上的传播时间=1000m/(200m/ms)=5µs；			
（3）发送64比特的确认帧所用的发送时间=64bits/10Mbps=6.4µs；	
（4）确认帧在电缆上的传播时间=1000m/(200m/ms)=5µs；	
（5）有效数据传输率=发送的有效数据/发送有效数据所用的总的时间，	
而有效数据=256-64=192比特，发送192比特的有效数据所占用的总的时间=25.6µs +5µs +6.4µs +5µs=42µs；则该以太网的有效数据传输率为192bits/42µs=4.57Mbps。
```

在浏览器中输入http://www.hbue.edu.cn并按回车，直到首页显示在其浏览器中，请问在此过程中，按照TCP/IP参考模型，从应用层到网络层都用到了哪些协议?并简述其功能

```
1)应用层。HTTP:WWW访问协议；DNS:域名解析服务。
2)传输层。TCP:HTTP提供可靠的数据传输；UDP:DNS使用UDP传输。
3)网络层。IP:IP包传输和路由选择；ICMP:提供网络传输中的差错检测；ARP:将本机的默认网关IP地址映射成物理MAC地址。
```

CIDR的地址分配更高效，因为采用可变长掩码，能根据网络的实际大小，分配主机地址空间。而且，CIDR具有路由聚合功能，能减少路由器的路由表项。

试简述五层网络体系结构中各层的要点。

```
(1)物理层：在物理媒体上传送比特流。
(2)数据链路层：在两个相邻结点间(主机和路由器或路由器和路由器之间)的链路上传送以帧为单位的数据。
(3)网络层：负责将分组从源主机(按照合适的路由)通过中间若干路由器的转发传送到目的主机。
(4)运输层：负责主机中两个进程之间的逻辑通信(端到端通信)。
(5)应用层：通过应用进程间的交互来实现特定网络应用，直接为用户或应用进程提供特定的应用服务，如文件传输、电子邮件等。
```

在一个采用CSMA/CD协议的网络中，传输介质是一根完整的电缆，传输速率为1Gb/s。电缆中信号的传播速率是200000km/s。若最小数据帧长度减少800bit，则最远的两个站点之间的距离应至少变化多少才能保证网络正常工作?

```
帧的长度减少了800bit,即发送帧的时间减少了800b/(1Gb/s),所以信号在最远两个端点之间往返的时间必须减少800b/(1Gb/s)。设减少的长度为x米，要计算往返传输的距离，有
2x/(2*108)≥800/109
x≥80m，即两个端点之间的距离至少减少80m
```

某局域网采用CSMA/CD协议实现介质访问控制，数据传输速率为10Mbps，主机甲和主机乙之间的距离为2km，信号传播速度是200000km/s。试回答下列问题，并给出计算过程。

（1）若主机甲和主机乙发送数据时发生冲突，则从开始发送数据时刻起，到两台主机均检测到冲突时刻止，最短需经多长时间？最长需经过多长时间？（假设主机甲和主机乙发送数据过程中，其他主机不发送数据）

（2）若网络不存在任何冲突与差错，主机甲总是以标准的最长以太网数据帧（1518字节）向主机乙发送数据，主机乙每成功收到一个数据帧后立即向主机甲发送一个64字节的确认帧，主机甲收到确认后方可发送下一数据帧。此时主机甲的有效数据传输速率是多少？（不考虑以太网帧的前导码）

```
（1）当甲乙同时向对方发送数据时，两台主机均检测到冲突所需时间最短
2*1km/200000km/s=1*10-5s
当一方发送的数据马上要到达另一方时，另一方开始发送数据，两台主机均检测到冲突所需时间最长
2*2km/2000000KM/S=2*10-5s
（2）发送一帧所需时间：1518B/10Mbps=1.518*10-4s
数据传播时间
2km/200000km/S=0.1*10-4s
总时长为 1.618*10-4s
有效的数据传输速率==   1518/1.618*10-4 = 9.38Mbps
```

 一个3200位长的TCP报文传到IP层，加上160位的首部后成为数据报。下面的互联网由两个局域网通过路由器连接起来。但第二个局域网所能传送的最长数据帧中的数据部分只有1200位。因此数据报在路由器必须进行分片。试问第二个局域网向其上层要传送多少比特的数据（这里的“数据”当然指的是局域网看见的数据）?

```
第二个局域网所能传送的最长数据帧中的数据部分只有1200bit，即每个IP数据片的数据部分<1200-160(bit)，由于片偏移是以8字节即64bit为单位的，所以IP数据片的数据部分最大不超过1024bit，这样3200bit的报文要分4个数据片，所以第二个局域网向上传送的比特数等于（3200+4×160），共3840bit。
```

ARP协议的功能是什么？假设主机1和主机2处于同一局域网（主机1的IP地址是172.16.22.101，主机2的IP地址是172.16.22.110），简述主机1使用ARP协议解析主机2的物理地址的工作过程。

```
当主机1要向主机2发送数据之前，必须解析出主机2的物理地址，解析过程如下：主机1发送一个广播帧（带有ARP报文）到以太网，该ARP报文大致意思是：“我的IP地址是172.16.22.101，谁的IP地址为172.16.22.110？请告诉我你的物理地址。”这个广播帧会传到以太网的所有机器，每个机器在收到广播帧后，都会去查看自己的IP地址。但是只有IP地址为172.16.22.110的主机2会返回主机1一个ARP响应报文，其中包含了主机2的物理地址（设为E2）。这样主机1就知道了IP地址为172.16.22.110的主机所对应的物理地址为E2，随后就可以向主机2发送数据。
```

TCP使用慢启动和拥塞避免，设TCP的拥塞窗口阈值的初始值为8（单位为MSS）。从慢启动开始，当拥塞窗口上升到12时网络发生了超时。试画出每个往返时间TCP拥塞窗口的演变曲线图（横坐标单位为RTT，纵坐标为拥塞窗口大小）。（画15个RTT，并说明主要步骤）

![img](  \vue的学习\计算机网络题.assets\clip_image002.gif)

![img](  \vue的学习\计算机网络题.assets\clip_image002-17040957062132.gif)

一名学生A 希望访问网站www.google.com。学生A 在其浏览器中输入

http://www.google.com 并按回车，直到Google 的网站首页显示在其浏览器中，请问：

(1) 在此过程中，按照TCP/IP 参考模型，从应用层（包括应用层）到网络接口层（包括网络接口层）都用到了哪些协议，每个协议所起的作用是什么？

(2) 简要描述该过程的流程。

```
(1) 协议及其功能如下：
应用层：HTTP：WWW访问；DNS：域名解析。
传输层：TCP：在客户和服务器之间建立连接，提供可靠的数据传输。
网络层：IP：进行路由选择。ICMP：提供网络传输中的差错检测。
ARP：将目的IP 地址映射成物理MAC 地址。
网络接口层：MAC：提供数据链路层的功能。
(2) 过程描述如下：
A、利用DNS，查询到WWW.GOOGLE.COM 对应的IP 地址。
B、浏览器与GOOGLE 的服务器利用TCP 协议建立连接。
C、浏览器利用HTTP 的GET 方法向GOOGLE 服务器发送资源请求。
D、GOOGLE 发送回应信息。
E、浏览器解释回应信息，并以图形化的方式显示。
```

在某个卫星信道上，发送端从一个方向发送长度为512B的帧，且发送端的数据发送速率为64kb/s，接收端在另一端返回一个很短的确认帧。设卫星信道端到端的单向传播时延为270ms，==若发送窗口为17==，信道的吞吐量为多少？

```
总时延=512/64kb/s+2*270ms=0.604s
(n*512B/64kb/s)/0.604s=100%求得信道利用率100%时，最多能发送n=9.46个帧
发送窗口为17，吞吐量为64kb/s。
```

